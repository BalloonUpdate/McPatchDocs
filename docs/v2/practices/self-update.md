---
title: 客户端自更新
---

:::warning

此特性仅支持Rust编写的旧版v2客户端，新的Java版客户端暂不支持

:::

McPatch 客户端会不定时发布新版本，新版本一般都会包含新的特性和改进修复，需要尽可能升级到新版本。

但客户端升级不像管理端那么容易：因为客户端在玩家电脑上，升级需要重新发包，比较麻烦。

因此 McPatch 特别支持了客户端热升级功能，用来远程下发新的客户端版本，无需重新发包。

客户端热升级的原理，是通过修改`loader.jar`的配置文件`startlist.txt`，来实现启动新版的客户端exe文件来做到热升级的。

## 首次配置

这部分步骤只需要进行一次即可，后续不用再做：（也就是配置了`一键启动`）

将下面的文件放入工作空间目录，以加入更新。并且文件位置要和客户端那边一一对应。

1. startlist.txt文件
2. 当前版本的客户端程序文件

## 升级过程

1. 下载好新版本的客户端程序文件
2. 将新版的客户端程序文件放入`minecraft/genxin`里（同时删除老版本的客户端程序）
3. 编辑`startlist.txt`文件
4. 将新版的文件名，插入到第一行。使旧版的文件名从第一行变成第二行。以此类推，不要删除这些旧文件名
5. 将刚刚的修改正常打包部署，客户端程序会自动下载。等到下一次运行时，启动的就会是新版的客户端程序了

startlist.txt的内容
```
mcpatch-client-新版本.exe
mcpatch-client-老版本2.exe
mcpatch-client-老版本1.exe
```
`workspace`大概长这样：
```
guanli/
├─ workspace/
│  └─ .minecraft/
│     └─ mcpatch/
│        ├─ mcpatch-client-新版本.exe
│        └─ startlist.txt
└─ m-0.0.11-x86_64-pc-windows-msvc.exe
```
